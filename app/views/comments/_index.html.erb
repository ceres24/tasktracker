<% @comments.each do |comment| %>
  <div style="background:rgba(0, 0, 0, .03); padding:5px;margin-bottom: 5px" >

    <div style="background-color: white; padding: 5px;" class="<%= 'recently_updated' if current_user.last_sign_in_at and current_user.last_sign_in_at < comment.updated_at %>"
      onmouseover="$('#comment_<%= comment.id %>_delete_link').show();" onmouseout="$('#comment_<%= comment.id %>_delete_link').hide();">
      <%= link_to comment.user.name, comment.user %>
      <span class="quiet small"><%= simple_time comment.created_at %></span>
      <% if current_user.all_deletable_comments.include?(comment) %>
        <%= link_to image_tag('gentleface/16/doc_delete.png', alt: '', style: 'vertical-align:text-bottom'), comment, confirm: "Are you sure you want to delete Comment #{comment.name}?", method: :delete, id: "comment_#{comment.id}_delete_link", style: 'display:none' %>
      <% end %>
      <div style="margin:5px 5px -15px 5px"><%= simple_format comment.description %></div>
    </div>
  </div>
<% end %>

<center><%= paginate @comments %></center>

<% width = '98%' %>
<% form_name = "sticky_#{@sticky.id}_comment_#{@position}_form" %>
<%= form_tag comments_path(sticky_id: @sticky.id, position: @position, per: params[:per].to_i), method: :post, remote: true, id: form_name do %>
<p>
  <%= hidden_field_tag :position, @position %>
  <%= text_area_tag "sticky[#{@sticky.id}][comment][#{@position}]", '', name: 'comment', rows: 2, style: "width:#{width};margin:5px" %>
  <%= link_to_function 'Add Comment', "$.post($(\"##{form_name}\").attr(\"action\"), $(\"##{form_name}\").serialize(), null, \"script\");", class: 'btn btn-primary' %>
</p>
<% end %>
